{% block _Scheme_schemaNew_widget %}
    <div class="card p-4 bg-white border mb-4">
        <h5 class="mb-4">Настройка мест и схемы зала</h5>

        <button id="toggleRulerBtn" type="button">Показать линейку</button>
        <button id="toggleOrientationBtn" disabled type="button">Вертикальная линейка</button>

        <div class="row mb-3">
            <div class="col-md-6">
                <label for="placeTypeSelect" class="form-label">Тип места</label>
                <select class="form-select" id="placeTypeSelect">
                    <option value="">Выберите тип места</option>
                </select>
            </div>
            <div class="col-md-6">
                <label for="placeTypePrice" class="form-label">Цена места</label>
                <input type="number" class="form-control" id="placeTypePrice" placeholder="Введите цену">
            </div>
        </div>

        <div class="mb-4">
            <button type="button" class="btn btn-success w-100" id="applyPriceBtn">
                Применить цену для всех мест этого типа
            </button>
        </div>

        <div class="d-flex gap-2 mb-3">
            <button type="button" class="btn btn-primary" id="addChairBtn">Добавить место</button>
            <button type="button" class="btn btn-outline-danger" id="clearSchemeBtn">Очистить схему</button>
        </div>

        <div id="canvas-container" class="border rounded">
            <canvas id="canvas" style="width: 100%; height: auto; background-color: transparent;"></canvas>
        </div>
    </div>

    {# Модальное окно выбора места #}
    <div class="modal fade" id="placeSelectModal" tabindex="-1" aria-labelledby="placeSelectModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="placeSelectModalLabel">Добавить место</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    <select class="form-select form-select-sm mb-4 mt-3" id="placesSelect" autocomplete="off">
                        <option value="">Выберите тип места</option>
                    </select>

                    <!-- Детали места: показывается после выбора типа -->
                    <div id="seatDetails" class="d-none">
                        <div class="mb-3">
                            <label for="seatSectionInput" class="form-label">Секция</label>
                            <input type="text" class="form-control" id="seatSectionInput" placeholder="Например, A">
                        </div>
                        <div class="mb-3">
                            <label for="seatRowInput" class="form-label">Ряд</label>
                            <input type="text" class="form-control" id="seatRowInput" placeholder="Например, 5">
                        </div>
                        <div class="mb-3">
                            <label for="seatNumberInput" class="form-label">Номер места</label>
                            <input type="text" class="form-control" id="seatNumberInput" placeholder="Например, 12">
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" id="confirmObject" class="btn btn-primary">Подтвердить</button>
                    <button type="button" id="cancelObject" class="btn btn-secondary" data-bs-dismiss="modal">Отмена</button>
                </div>
            </div>
        </div>
    </div>

    {# Модальное окно информации о месте (редактируемое) #}
    <div class="modal fade" id="infoModal" tabindex="-1" aria-labelledby="infoModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="infoModalLabel">Информация о месте</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Закрыть"></button>
                </div>
                <div class="modal-body">
                    <div class="mb-3">
                        <div class="mb-3">
                            <label for="infoPlaceTypeSelect" class="form-label">Тип места</label>
                            <select id="infoPlaceTypeSelect" class="form-select"></select>
                        </div>
                        <p><strong>Цена:</strong> <span id="infoPlacePrice"></span></p>
                    </div>

                    <div class="mb-3">
                        <label for="infoSectionInput" class="form-label">Секция</label>
                        <input type="text" class="form-control" id="infoSectionInput" name="infoSectionInput">
                    </div>
                    <div class="mb-3">
                        <label for="infoRowInput" class="form-label">Ряд</label>
                        <input type="text" class="form-control" id="infoRowInput" name="infoRowInput">
                    </div>
                    <div class="mb-3">
                        <label for="infoSeatNumberInput" class="form-label">Номер места</label>
                        <input type="text" class="form-control" id="infoSeatNumberInput" name="infoSeatNumberInput">
                    </div>
                    <div class="mb-3">
                        <label for="infoWidthInput" class="form-label">Ширина</label>
                        <input type="number" class="form-control" id="infoWidthInput" name="infoWidthInput" min="1" value="1">
                    </div>
                    <div class="mb-3">
                        <label for="infoHeightInput" class="form-label">Высота</label>
                        <input type="number" class="form-control" id="infoHeightInput" name="infoHeightInput" min="1" value="1">
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Закрыть</button>
                    <button type="button" class="btn btn" id="applyPlaceChangesBtn">Сохранить изменения</button>
                </div>
            </div>
        </div>
    </div>
{% endblock %}
